# План автоматизированного тестирования формы покупки туров

## Перечень автоматизируемых сценариев:

### Входные данные
**Валидные данные при заполнении полей:**
- **"Номер карты"**: 16 цифр в формате **** **** **** ****
- **"Месяц"**: число от 01 до 12
- **"Год"**: две цифры текущего или последующих годов (но не более 5 лет от текущего года)
- **"Владелец"**: Имя составное (first name, last name) на латинице
- **"СVC/CVV"**: три цифры

**Номера карт, используемых для тестирования:**
- Номер валидной карты : "4444 4444 4444 4441" статус карты "Approved"
- Номер не валидной карты: "4444 4444 4444 4442" статус карты "Declined"

**Обязательные условия до запуска сценариев тестирования**
- Переход на станицу покупки тура доступнен только при **запущенной SUT**
- Страница покупки тура http://localhost:8080/ открыта


### UI сценарии

**Карта со статусом Approved, все поля формы покупки валидные**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Форма отправилась успешно, сообщение - "Успешно. Операция одобрена банком!"

**Карта со статусом Declined, все поля формы покупки валидные**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4442
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы выполнена успешно, сообщение - "Ошибка! Банк отказал в проведении операции!"

**Поле "Номер карты" пустое, все остальные поля формы покупки валидные**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты оставить пустым
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

**Поле "Номер карты" из 15-ти цифр**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты заполнить только 15 цифр (например, 4444 4444 4444 444)
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

**Карта, которой нет в базе данных**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты заполнить валидные 16 цифр (например, 1234 9876 4565 2222)
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы возможна, сообщение - "Ошибка! Банк отказал в проведении операции"

**Поле "Месяц" со значением 13**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести невалидное значение (например месяц 13)
4. В поле год ввести валидные значения
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

**Поле "Месяц" пустое**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ничего не добавлять, оставить пустым
4. В поле год ввести валидные значения
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Месяц"

**Поле "Месяц" со значением 00**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести невалидное значение (например меньше 01, тоесть 00)
4. В поле год ввести валидные значения
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

**Поле "Месяц" с невалидным значением**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести невалидное значение (например 5)
4. В поле год ввести валидные значения
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Месяц"

**Поле "Год" с невалидным значением*
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести валидные значения
4. В поле год ввести невалидное значение (например 1)
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Год"

**Поле "Год" пустое**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести валидные значения
4. В поле год оставить пустое поле
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение «Поле обязательно для заполнения» под полем "Год"

**Поле "Год" со значением, предшествующее текущему**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести валидные значения
4. В поле год заполнить граничным невалидным данными года, предшествующего текущему (например 21)
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Истек срок действия карты" под полем "Год"

**Поле "Год" со значением, превышающим 5 лет от текущей даты**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц ввести валидные значения
4. В поле год заполнить значением превышающим 5 лет от текущего (например 30)
5. В поле Владелец ввести валидные значения
6. В поле СVC/CVV ввести валидные значения
7. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Год"

**Поле "Владелец" фамилия и имя латиницей в верхнем регистре**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести фамилию и имя в верхнем регистре на латинице (например OSTAPOV PETR)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Форма отправилась успешно, сообщение - "Успешно. Операция одобрена банком!"

**Поле "Владелец" значение через дефис**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести фамилию через дефис на латинице (например Ostapov-Sokolov Petr)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Форма отправилась успешно, сообщение - "Успешно. Операция одобрена банком!"

**Поле "Владелец" фамилия на латинице, имя пустое поле**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести фамилию на латинице, имя оставить незаполненным (например Ostapov)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

**Поле "Владелец" пустое поле**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец оставить пустым поле, не заполнять
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Владелец"

**Поле "Владелец" фамилия и имя на кирилице**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести фамилию и имя на кирилице (например Семенова Юлия)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

**Поле "Владелец" заполнено цифрами**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести цифры (например 9987 2214)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

**Поле "Владелец" спецсимволами**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести спецсимволы (например ;"%+++!)
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

**Поле "CVC/CVV" c двумя цифрами**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести две цифры (например 11)
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

**Поле "CVC/CVV" пустое**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV оставить пустым, не заполнять
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "CVC/CVV"

**Поле "CVC/CVV" c одной цифрой**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. В поле данные карты ввести: номер карты 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести одну цифру (например 8)
6. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

**Отправка пустой формы оплаты**
Шаги:
1. Нажать на кнопку "Купить"/"Купить в кредит"
2. Нажать на кнопку "Продолжить"

**Ожидаемы результат:** Отправка формы невозможна, во всех полях предупреждение "Поле обязательно для заполнения"


### API-сценарии

#### Запросы на http://localhost:9999/payment

**Валидная карта**

Шаги:
1. Запустить Postman
2. В теле запроса Body заполнить необходимые поля
2. В поле данные карты ввести: 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Отправить"

   **Ожидаемый результат:** Ответ сервера: код 200

**Не валидная карта**

Шаги:
1. Запустить Postman
2. В теле запроса Body заполнить необходимые поля
2. В поле данные карты ввести: 4444 4444 4444 4442
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Отправить"

   **Ожидаемый результат:** Ответ сервера: код 200

#### Запросы на http://localhost:9999/credit

**Валидная карта**

Шаги:
1. Запустить Postman
2. В теле запроса Body заполнить необходимые поля
2. В поле данные карты ввести: 4444 4444 4444 4441
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Отправить"

   **Ожидаемый результат:** Ответ сервера: код 200

**Не валидная карта**

Шаги:
1. Запустить Postman
2. В теле запроса Body заполнить необходимые поля
2. В поле данные карты ввести: 4444 4444 4444 4442
3. В поле месяц/год ввести валидные значения
4. В поле Владелец ввести валидные значения
5. В поле СVC/CVV ввести валидные значения
6. Нажать на кнопку "Отправить"

   **Ожидаемый результат:** Ответ сервера: код 200


## Перечень используемых инструментов с обоснованием выбора
* JDK 11 - Язык программирования на котором будет написан проект
* IntelliJ IDEA - Код автотестов написан на Java, IntelliJ IDEA - инструмент для написания автотестов на java
* Gradle - Система сборки кода. Легче писать код, управлять зависимостями
* Github. Как репозиторий для хранения кода.
* JUnit Jupiter. Фреймворк для тестирования. Есть все необходимые аннотации  
* Selenide. Продвинутый плагин для тестирования веб-интерфейса (проще чем selenium)
* Lombok. Плагин для минимизации строк кода за счет аннотаций.
* Docker Desktop. Virtual Machine для запуска докер образа в нашем проекте
* Faker. Плагин для генерации данных.
* REST-assured. Плагин для тестирования API
* Postman. Инструмент для работы с API, который позволяет посылать запросы к сервисам и работать с их ответами
* DBeaver. Для запроса к БД
* Allure - Для составления отчетов

## Перечень и описание возможных рисков при автоматизации
* если будет изменен интерфейс/добавлены какие-то фичи в форме оплаты, то придется переделывать тесты
* отсутствие спецификации на приложение
* сразу использованы две базы данных, что добавляет сложностей при настройке SUT
* Отсутствие спецификации по запросам REST API.
* Отсутствие требований к полям формы.
* Отсутствие спецификации к БД с информацией по таблицам, полям и значениям.

## Интервальная оценка с учётом рисков (в часах):
* Настройка SUT - 5 часов
* Разработка тест-плана - 20 часов
* Написание авто-тестов и их прогон - 100 часов
* Написание баг-репортов - 20 часов
* Написание отчета по результатам автоматизации - 6 часов
* Настройка CI - 6 часов

## План сдачи:
1. Разработка автотестов: 22.03.2023
2. Отчеты по результатам теста:  25.03.2023
3. Отчеты по результатам автоматизированного тестирования: 28.03.2023